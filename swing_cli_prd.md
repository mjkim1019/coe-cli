# Swing CLI – Product Requirements Document (PRD)

## 1. 제품 개요
`Swing CLI`는 대화형 CLI 도구로, 개발자가 코드에 대해 **질문**, **수정**, **테스트**, **구조 분석**을 할 수 있도록 지원합니다.  
LLM(대규모 언어 모델) 백엔드를 통해 파일을 분석하고, 다양한 언어(C, SQL, XML 등)에 특화된 분석 결과를 제공합니다.

---

## 2. 목표 및 가치
- **개발자 생산성 향상**: 코드 리뷰, 구조 이해, 테스트 실행을 CLI 상에서 바로 가능하게 함
- **운영 안정성 강화**: 배포 전 코드 검토 및 시스템 분석 지원
- **학습 곡선 완화**: 신규 팀원이 빠르게 프로젝트 구조와 로직을 이해할 수 있도록 돕는 도구 제공

---

## 3. 타겟 사용자
- **개발자**: Python, C, SQL, XML 등 다양한 언어 기반 프로젝트를 다루는 팀
- **운영자/시스템 관리자**: 유지보수, 배포 전 코드 검토, 운영 안정성 확보가 필요한 역할

---

## 4. 성공 지표
- CLI 기반 코드 분석 요청에 대한 **평균 응답 시간** (≤ 2초 캐시된 경우, ≤ 10초 비캐시 경우)
- **코드 구조 분석 정확도** (사용자 평가 기준 ≥ 80% 이해도 만족도)
- **세션 복구 성공률** (저장/복구 기능 도입 후 ≥ 95%)
- **테스트 실행 성공률** (CLI 내 자동 테스트 시 오류 없는 실행 비율 ≥ 90%)

---

## 5. 주요 기능 요구사항

### 5.1 핵심 기능
1. **LLM 기반 코드 구조 분석**  
   - 계층 구조, 호출 관계, 주요 로직 요약
   - 파일 타입별 특화 분석 (C, XML, SQL)
   - JSON 응답을 자동 변환해 테이블로 표시

2. **대화형 CLI (REPL)**  
   - `prompt_toolkit` 기반 인터페이스
   - 자동완성, 명령어 지원 (`/add`, `/ask`, `/edit`, `/test` 등)

3. **온디맨드 분석**  
   - 파일 추가 시 기본 분석만 수행  
   - "구조 분석" 요청 시 `CodeAnalyzer` 실행

4. **디버그/투명성 기능**  
   - LLM 호출 과정 로깅
   - `/debug` 명령으로 상세 추적 가능

---

### 5.2 차별화 기능
- **파일 타입별 특화 분석**
  - **C 파일**: IO Formatter, `c000_main_proc`, DBIO 호출 패턴
  - **XML 파일**: TrxCode 호출, UI 컴포넌트, JS 함수
  - **SQL 파일**: 입출력 값, 조인 관계, 오라클 특화 기능
- **특수 용어 인식**: DBIO 관련 질문 자동 인식 및 데이터베이스 분석 모드 전환

---

### 5.3 향후 확장 기능 (로드맵)
- 자동 테스트 실행 (Makefile, CMake)
- 세션 저장/복구 및 컨텍스트 관리
- diff/patch 기반 수정 및 롤백
- MCP(Multi-step Code Planning) 기반 단계적 코드 수정
- Web UI 기반 코드 구조 시각화

---

## 6. 기술 요구사항
- **Language**: Python 3.8+
- **CLI Framework**: Click
- **Interactive Interface**: prompt_toolkit
- **LLM Integration**: OpenAI API
- **HTTP Client**: requests

---

## 7. 제약사항
- 초기 버전에서는 Python, C, SQL, XML 분석에 집중
- 대규모 리포지토리에서의 성능은 캐싱 시스템 도입 후 개선 예정
- 테스트 자동화는 기본 Makefile/CMake만 지원 (향후 확장 고려)

---

## 8. 리스크 및 완화 방안
- **LLM 응답 불안정성** → JSON Schema 강제 + 디버그 로깅
- **대규모 프로젝트 성능 저하** → 캐시 기반 분석 결과 재사용
- **사용자 학습 곡선** → `/tutorial` 명령어 제공 예정